# Legacy System Feature Backlog for Radium

## Overview

This document catalogs every feature in the legacy system to ensure complete feature parity when building Radium. Features are organized by major functional areas. This backlog should be used as a reference when implementing Radium to ensure no features are missed.

**Last Updated**: Based on legacy system v0.58.0

---

## 1. CLI Commands

### 1.1 Core Commands

#### `rad plan <spec-path>`
Generate structured plan from specification markdown file.

**Options:**
- `--id <id>`: Override auto-generated requirement ID (e.g., REQ-123)
- `--name <name>`: Customize folder name suffix (default: derived from spec filename)

**Features:**
- Auto-generates requirement IDs (REQ-XXX format)
- Creates plan folder structure in `radium/backlog/`
- Generates multiple plan files:
  - `01_Plan_Overview_and_Setup.md`
  - `02_Iteration_I*.md` (one per iteration)
  - `03_Verification_and_Glossary.md`
  - `plan_manifest.json`
  - `coordinator-prompt.md`
- Interactive mode with AI-powered question generation
- Tech stack detection from project files
- Validates specification file exists and is markdown
- Requirement ID format validation (REQ-XXX)
- Folder name slugification

#### `rad craft [plan-identifier]`
Execute plans generated by `rad plan`.

**Options:**
- `--iteration <id>`: Execute specific iteration only (e.g., I1)
- `--task <id>`: Execute specific task only (e.g., I1.T1)
- `--resume`: Resume from last checkpoint
- `--dry-run`: Show what would be executed without running
- `--json`: Output results as JSON (for CI/CD and scripting)
- `--no-clear`: Do not clear terminal (useful for non-interactive mode)

**Features:**
- Plan selection menu if no identifier provided
- List all plans with `rad craft list`
- Plan discovery by REQ-XXX ID or folder name
- Displays plan details and progress
- JSON output for CI/CD integration
- Non-interactive mode support (CI environment detection)
- Plan status and progress tracking
- Iteration-by-iteration execution
- Task-by-task execution

#### `rad run <script>`
Run agent(s) with enhanced syntax using default engine.

**Options:**
- `--model <model>`: Model to use (overrides agent config)
- `-d, --dir <directory>`: Working directory (default: process.cwd())

**Syntax Features:**
- Single agent execution: `rad run "agent-id 'prompt'"`
- Parallel execution with `&`: `rad run "agent1 'task1' & agent2 'task2'"`
- Sequential execution with `&&`: `rad run "agent1 'task1' && agent2 'task2'"`
- Input file injection: `agent[input:file1.md,file2.md]`
- Tail context: `agent[tail:50]`
- Multiple inputs: `agent[input:file1.md;file2.md;file3.md]`
- Combined syntax: `agent[input:design.md,tail:100] 'prompt'`
- Mixed parallel/sequential: `rad run "db[tail:50] 'setup' && frontend[input:design.md,tail:100] & backend[input:api-spec.md,tail:100]"`

**Engine-Specific Variants:**
- `rad <engine> run <script>`: Use specific engine (e.g., `rad claude run`, `rad codex run`)

#### `rad step <id> [prompt...]`
Execute a single workflow step (agent from config/main.agents.js).

**Options:**
- `--model <model>`: Model to use (overrides agent config)
- `--engine <engine>`: Engine to use (overrides agent config and defaults)
- `--reasoning <level>`: Reasoning effort level: low, medium, or high (overrides agent config)

**Features:**
- Executes agent from config/main.agents.js
- Supports additional prompt appending to agent's main prompt
- Plan-scoped memory integration
- Engine resolution: CLI override > agent config > first authenticated engine
- Model resolution: CLI override > agent config > engine default
- Reasoning effort resolution: CLI override > agent config > engine default
- Memory storage (last 2000 chars) if plan directory detected

#### `rad status`
Show status of CLI tools and authentication.

**Options:**
- `--json`: Output status as JSON (for CI/CD and scripting)

**Features:**
- Displays table of all engines with:
  - CLI installed status (✓/✗)
  - Authenticated status (✓/✗)
- Shows missing CLI tools with install commands
- Shows unauthenticated engines with login instructions
- Summary count of authenticated engines
- JSON output for scripting
- Brief status for startup banner

#### `rad clean`
Clean workspace artifacts, memory, logs, prompts, and inputs.

**Options:**
- `-v, --verbose`: Show detailed output
- `-d, --dir <path>`: Target workspace directory (default: process.cwd())

**Features:**
- Removes directories:
  - `radium/.radium/artifacts/`
  - `radium/.radium/memory/`
  - `radium/.radium/logs/`
  - `radium/.radium/prompts/`
  - `radium/.radium/inputs/`
- Preserves radium/ folder structure (backlog, development, review, testing, docs)
- Idempotent (safe to run multiple times)
- Verbose mode shows detailed operations

#### `rad templates`
List and select workflow templates.

**Options:**
- `--basic`: Select Basic template (non-interactive)
- `--full`: Select Full template with all specialized agents (non-interactive)
- `--template <name>`: Select template by name (non-interactive)
- `--json`: Output results as JSON (for CI/CD and scripting)

**Features:**
- Interactive template selection menu
- Template discovery from `templates/workflows/`
- Template validation
- Regenerates agents folder when template changes
- Tracks active template in `radium/.radium/template.json`
- Template change detection
- Agent folder regeneration on template change
- Template description generation
- Support for module steps and UI steps
- Sub-agent IDs configuration

#### `rad version`
Display CLI version.

**Features:**
- Shows version from package.json
- Simple version output

#### `rad mcp`
Model Context Protocol integration stubs.

**Status:** Coming soon

### 1.2 Authentication Commands

#### `rad auth login`
Authenticate with AI providers.

**Options:**
- `--codex`: Authenticate with Codex
- `--claude`: Authenticate with Claude Code
- `--cursor`: Authenticate with Cursor
- `--ccr`: Authenticate with Claude Code Router
- `--opencode`: Authenticate with OpenCode
- `--auggie`: Authenticate with Auggie CLI
- `--provider <id>`: Authenticate with a specific provider by ID

**Features:**
- Interactive provider selection if no option specified
- Supports non-interactive mode
- Special handling for CCR:
  - Shows configuration tips
  - Displays CCR UI command
  - Shows config file location
- Special handling for OpenCode:
  - Multi-provider support
  - Shows current auth providers
  - Option to add another provider
  - XDG environment variable configuration
- Authentication status checking
- Already authenticated detection

#### `rad auth logout`
Log out of AI providers.

**Options:**
- Same as `rad auth login` (provider-specific flags)

**Features:**
- Clears authentication for specified provider
- Interactive provider selection if no option specified
- Supports non-interactive mode
- Confirmation of logout

### 1.3 Agent Management Commands

#### `rad agents list`
List all active and offline agents.

**Features:**
- Shows agent registry from monitoring database
- Displays agent status (running, completed, failed)
- Agent metadata display

#### `rad agents logs <id>`
View logs for a specific agent.

**Features:**
- Agent ID validation
- Log file reading and display
- Agent log path resolution

#### `rad agents export`
Export agent registry to JSON.

**Features:**
- Exports all agent records
- JSON format output
- Includes agent metadata and status

#### `rad agents register`
Register new agent (via monitoring system).

**Features:**
- Agent registration in monitoring database
- Agent metadata storage

---

## 2. Workflow System

### 2.1 Workflow Execution

**Core Execution Features:**
- Sequential step execution
- Parallel step execution (via `&` operator in `rad run`)
- Step skipping based on completion status
- Resume from checkpoint functionality
- Dry-run mode
- Workflow interruption handling (Ctrl+C)
- Step retry logic
- Fallback step execution
- Step status tracking (not started, running, completed, failed)
- Workflow state persistence
- Execution context management

**Step Execution:**
- Module step execution (agents)
- UI step handling (pre-populated, no execution)
- Step index tracking
- Unique agent ID generation per step instance
- Step output capture
- Step duration tracking

**Resume Functionality:**
- Checkpoint detection
- Completed steps tracking
- Not completed steps tracking
- Resume start index calculation
- State restoration

**Error Handling:**
- Fallback agent execution on failure
- Error logging
- Graceful degradation
- Workflow continuation on non-critical errors

### 2.2 Workflow Behaviors

#### Loop Behavior
Step back to previous steps based on agent output.

**Configuration:**
- `loopSteps`: Number of steps to loop back
- `loopMaxIterations`: Maximum iterations before stopping
- `loopSkip`: Array of step IDs to exclude from loop

**Features:**
- Behavior evaluation from agent output
- Loop counter tracking per step
- Skip list application
- Maximum iteration enforcement
- Loop termination detection
- Behavior file (behavior.json) for dynamic control
- Loop decision logging
- Active loop state management

**Behavior File:**
- Location: `radium/backlog/REQ-XXX/memory/behavior.json`
- Format: `{ "action": "continue" | "stop" }`
- Reset to "continue" before each agent run
- Plan-scoped (only in plan contexts)

#### Trigger Behavior
Dynamically trigger other agents based on step output.

**Configuration:**
- `triggerAgentId`: Default agent to trigger (can be overridden by behavior.json)
- Behavior type: `trigger`
- Action: `mainAgentCall`

**Features:**
- Trigger decision evaluation from agent output
- Dynamic agent ID selection
- Trigger reason logging
- Behavior file override support
- Triggered agent execution
- Debug mode support (`RADIUM_DEBUG_TRIGGERS=1`)

#### Checkpoint Behavior
Save and resume workflow state.

**Features:**
- Checkpoint decision evaluation
- Workflow stop on checkpoint
- Checkpoint reason logging
- UI checkpoint state management
- Checkpoint modal display
- State persistence

**Checkpoint State:**
- Active flag
- Reason message
- UI modal integration

### 2.3 Workflow Templates

**Template System:**
- Template loading from `templates/workflows/`
- Template validation
- Active template tracking in `radium/.radium/template.json`
- Agent folder regeneration on template change
- Template change detection

**Template Structure:**
- `name`: Template name
- `steps`: Array of workflow steps
- `subAgentIds`: Array of sub-agent IDs available in workflow

**Step Types:**
- Module steps: Agent execution steps
- UI steps: Visual separators and labels (no execution)

**Step Resolution:**
- `resolveStep(agentId, parameters)`: Load main agent
- `resolveModule(moduleId, parameters)`: Load module with behavior
- `resolveUI(label)`: Create UI separator element

**Template Features:**
- Step parameter overrides (engine, model, reasoning, etc.)
- `executeOnce` flag for steps
- `notCompletedFallback` for fallback agents
- Behavior configuration for modules
- Sub-agent filtering by template

**Available Templates:**
- Basic: Streamlined workflow for standard development
- Full: Complete workflow with all specialized agents
- Custom: User-defined templates

---

## 3. Agent System

### 3.1 Main Agents (config/main.agents.js)

**Core Legacy System Agents:**
- `arch-agent`: Architecture Agent - Defines system architecture and technical design decisions
- `plan-agent`: Plan Agent - Analyzes requirements and generates comprehensive iterative development plans
- `task-breakdown`: Task Breakdown Agent - Extracts and structures tasks from project plans into JSON format
- `context-manager`: Context Manager Agent - Gathers and prepares relevant context from architecture, plan, and codebase
- `code-generation`: Code Generation Agent - Generates code implementation based on task specifications
- `task-sanity-check`: Task Verification Agent - Verifies generated code against task requirements and acceptance criteria
- `runtime-prep`: Runtime Preparation Agent - Generates robust shell scripts for project automation
- `git-commit`: Git Commit Agent - Handles git commit operations and commit message generation
- `cleanup-code-fallback`: Cleanup Code Fallback File - Deletes code fallback files
- `plan-fallback`: Plan Fallback Agent - Fixes and validates plan generation issues
- `task-fallback`: Task Fallback Agent - Fixes and validates task breakdown issues

**Development Agents:**
- `init`: Init - Initializes Radium development environment
- `principal-analyst`: Principal Analyst - Reviews project specifications and identifies critical ambiguities
- `specifications-indexer`: Specifications Indexer - Indexes and structures project specifications
- `blueprint-orchestrator`: Blueprint Orchestrator - Orchestrates architecture blueprint generation

**RAD-Agents (70+ specialized agents):**

**Design Agents:**
- `brand-guardian`: Brand Guardian - Brand identity development and consistency
- `ui-designer`: UI Designer - Visual design systems and component libraries
- `architectux`: ArchitectUX - Technical architecture and UX specialist
- `ux-researcher`: UX Researcher - User behavior analysis and usability testing
- `design-visual-storyteller`: Visual Storyteller - Visual narratives and multimedia content
- `whimsy-injector`: Whimsy Injector - Personality and playful elements

**Engineering Agents:**
- `engineering-ai-engineer`: AI/ML Engineer - Machine learning model development
- `backend-architect`: Backend Architect - Scalable system design and API development
- `code-review-quality-gate-agent`: Code Review & Quality Gate - Automated code review
- `database-migration-schema-agent`: Database Migration & Schema - Database changes management
- `devops-automator`: DevOps Automator - Infrastructure automation and CI/CD
- `frontend-developer`: Frontend Developer - Modern web technologies and frameworks
- `mobile-app-builder`: Mobile App Builder - Native iOS/Android development
- `rapid-prototyper`: Rapid Prototyper - Ultra-fast proof-of-concept development
- `engineering-senior-developer`: Senior Developer - Premium implementation specialist

**Marketing Agents:**
- `app-store-optimizer`: App Store Optimizer - ASO and conversion optimization
- `marketing-content-creator`: Content Creator - Multi-platform content campaigns
- `marketing-growth-hacker`: Growth Hacker - Rapid user acquisition
- `marketing-instagram-curator`: Instagram Curator - Visual storytelling and community building
- `marketing-reddit-community-builder`: Reddit Community Builder - Authentic community engagement
- `marketing-social-media-strategist`: Social Media Strategist - Twitter, LinkedIn campaigns
- `marketing-tiktok-strategist`: TikTok Strategist - Viral content creation
- `marketing-twitter-engager`: Twitter Engager - Real-time engagement

**Product Agents:**
- `product-feedback-synthesizer`: Feedback Synthesizer - User feedback analysis
- `product-sprint-prioritizer`: Sprint Prioritizer - Agile sprint planning
- `product-trend-researcher`: Trend Researcher - Market intelligence and competitive analysis

**Project Management Agents:**
- `experiment-tracker`: Experiment Tracker - A/B tests and feature experiments
- `production-readiness-gatekeeper`: Production Readiness Gatekeeper - Final approval gate
- `project-shepherd`: Project Shepherd - Cross-functional project coordination
- `studio-operations`: Studio Operations - Day-to-day studio efficiency
- `studio-producer`: Studio Producer - High-level creative and technical orchestration
- `project-manager-senior`: Senior Project Manager - Spec to task conversion

**Security Agents:**
- `application-security-tester`: Application Security Tester - OWASP Top 10 and vulnerability assessment
- `security-audit-lead`: Security Audit Lead - Comprehensive security assessments
- `authentication-security-specialist`: Authentication Security Specialist - Identity systems and OAuth/OIDC
- `infrastructure-security-auditor`: Infrastructure Security Auditor - Cloud security and network architecture
- `penetration-testing-specialist`: Penetration Testing Specialist - Ethical hacking and exploitation
- `data-privacy-compliance-auditor`: Data Privacy & Compliance Auditor - GDPR, CCPA, HIPAA compliance
- `security-report-generator`: Security Report Generator - Executive summaries and technical reports

**Testing Agents:**
- `accessibility-specialist`: Accessibility Specialist - WCAG and VPAT compliance
- `api-tester`: API Tester - Comprehensive API validation
- `testing-architect`: Testing Architect - World-class testing systems
- `evidenceqa`: EvidenceQA - Screenshot-obsessed QA specialist
- `performance-benchmarker`: Performance Benchmarker - Performance testing and optimization
- `playwright-audit-specialist`: Playwright Audit Specialist - UI exploration and E2E test creation
- `testing-reality-checker`: Reality Checker - Evidence-based certification
- `test-results-analyzer`: Test Results Analyzer - Test result evaluation
- `tool-evaluator`: Tool Evaluator - Technology assessment
- `frontend-ui-tester`: Frontend UI Tester - Playwright UI testing
- `workflow-optimizer`: Workflow Optimizer - Process improvement

**Support Agents:**
- `analytics-reporter`: Analytics Reporter - Data analysis and business insights
- `executive-summary-generator`: Executive Summary Generator - C-suite decision support
- `finance-tracker`: Finance Tracker - Financial planning and budget management
- `incident-response-agent`: Incident Response Agent - Production incidents and rollbacks
- `infrastructure-maintainer`: Infrastructure Maintainer - System reliability and performance
- `legal-compliance-checker`: Legal Compliance Checker - Legal and compliance specialist
- `support-responder`: Support Responder - Customer support and issue resolution

**Specialized Agents:**
- `agents-orchestrator`: Agents Orchestrator - Autonomous pipeline manager
- `data-analytics-reporter`: Data Analytics Reporter - Business insights and dashboards
- `lsp-index-engineer`: LSP/Index Engineer - Language Server Protocol specialist
- `braingrid-integration-orchestrator`: BrainGrid Integration Orchestrator - BrainGrid API/CLI interface

**Spatial Computing Agents:**
- `macos-spatial-metal-engineer`: macOS Spatial/Metal Engineer - High-performance 3D rendering
- `terminal-integration-specialist`: Terminal Integration Specialist - Terminal emulation and text rendering
- `visionos-spatial-engineer`: visionOS Spatial Engineer - Native visionOS spatial computing
- `xr-cockpit-interaction-specialist`: XR Cockpit Interaction Specialist - Immersive cockpit control systems
- `xr-immersive-developer`: XR Immersive Developer - WebXR and immersive technology
- `xr-interface-architect`: XR Interface Architect - Spatial interaction designer

### 3.2 Sub-Agents (config/sub.agents.js)

**Architecture Sub-Agents:**
- `founder-architect`: Foundation architect
- `structural-data-architect`: Structural data architect
- `behavior-architect`: Behavior architect
- `ui-ux-architect`: UI/UX architect
- `operational-architect`: Operational architect
- `file-assembler`: File assembler

**Features:**
- Used for parallel execution in blueprint orchestrator
- Specialized architecture roles
- Coordinated execution via orchestrator

### 3.3 Modules (config/modules.js)

#### `check-task`
Task completion checker with loop behavior.

**Features:**
- Validates that all tasks are completed
- Signals whether to repeat workflow steps
- Loop behavior: `stepBack` action
- Behavior type: `loop`

#### `iteration-checker`
Iteration checker with trigger behavior.

**Features:**
- Checks if additional iterations are needed
- Can trigger other agents dynamically
- Trigger behavior: `mainAgentCall` action
- Default trigger agent: `git-commit` (configurable)
- Behavior type: `trigger`

#### `auto-loop`
Simple auto loop module for testing.

**Features:**
- Always signals to continue looping
- Loop behavior: `stepBack` action
- Behavior type: `loop`

### 3.4 Agent Configuration

**Agent Definition Structure:**
- `id`: Unique agent identifier
- `name`: Human-readable agent name
- `description`: Agent description
- `promptPath`: Path to prompt template file (absolute or relative)
- `mirrorPath`: Path to mirrored agent prompt (for RAD-agents)
- `engine`: Default engine assignment (optional)
- `model`: Default model assignment (optional)
- `modelReasoningEffort`: Default reasoning effort (optional)

**Agent Loading:**
- Agent discovery from multiple root directories
- Prompt file resolution
- Mirror path resolution for RAD-agents
- Agent filtering by template sub-agent IDs
- Agent JSON mirroring to workspace

**Agent Execution:**
- Prompt template loading
- Prompt processing and placeholder replacement
- Engine and model resolution
- Memory integration
- Output capture and storage

---

## 4. Engine/Provider System

### 4.1 Supported Engines

#### Codex
- **CLI Binary**: `codex`
- **Provider**: OpenAI
- **Status**: ✓ Supported
- **Install Command**: See Codex CLI documentation
- **Features**: OpenAI Codex CLI integration

#### Claude
- **CLI Binary**: `claude`
- **Provider**: Anthropic
- **Status**: ✓ Supported
- **Install Command**: See Claude Code CLI documentation
- **Features**: Claude Code CLI integration

#### CCR (Claude Code Router)
- **CLI Binary**: `ccr`
- **Provider**: Multiple (via router)
- **Status**: ✓ Supported
- **Install Command**: See CCR documentation
- **Features**: 
  - Multi-provider routing
  - Configuration via `~/.claude-code-router/config.json`
  - Web UI for provider management (`ccr ui`)

#### OpenCode
- **CLI Binary**: `opencode`
- **Provider**: Multiple
- **Status**: ✓ Supported
- **Install Command**: See OpenCode CLI documentation
- **Features**:
  - Multi-provider support
  - XDG directory configuration
  - Provider management via `opencode auth list`
  - Custom home directory via `OPENCODE_HOME` env var

#### Cursor
- **CLI Binary**: `cursor`
- **Provider**: Cursor
- **Status**: ✓ Supported
- **Install Command**: See Cursor CLI documentation
- **Features**: Cursor CLI integration

#### Auggie
- **CLI Binary**: `auggie`
- **Provider**: Augment Code
- **Status**: ✓ Supported
- **Install Command**: See Auggie CLI documentation
- **Features**: Auggie CLI integration

#### Gemini
- **CLI Binary**: `gemini`
- **Provider**: Google
- **Status**: ⊙ Coming Soon
- **Features**: Gemini CLI integration (planned)

#### Qwen Coder
- **CLI Binary**: `qwen-code`
- **Provider**: Qwen
- **Status**: ⊙ Coming Soon
- **Features**: Qwen Coder integration (planned)

### 4.2 Engine Features

**CLI Binary Detection:**
- Path checking via `Bun.which()` or Node.js `spawn`
- Version command execution
- Timeout handling (3 seconds)
- Error detection and parsing

**Authentication:**
- Authentication status checking per engine
- Authentication methods vary by engine
- Auth state persistence
- Multi-provider authentication (CCR, OpenCode)

**Model Selection:**
- Per-agent model assignment
- CLI override support
- Engine default model fallback
- Model validation

**Reasoning Effort Levels:**
- `low`: Minimal reasoning effort
- `medium`: Moderate reasoning effort
- `high`: Maximum reasoning effort
- Per-agent configuration
- CLI override support
- Engine default fallback

**Telemetry Parsing:**
- Token counting (input, output, cached)
- Cost calculation
- Cache statistics (creation, read tokens)
- Real-time telemetry updates
- Engine-specific telemetry parsers
- Telemetry storage in database

**Execution Features:**
- Streaming output support
- Error stream handling
- Timeout handling
- Abort signal support
- Working directory specification
- Environment variable passing
- Process ID tracking

**Error Handling:**
- Engine-specific error handling
- Timeout detection
- Authentication error handling
- CLI not found detection
- Graceful degradation

### 4.3 Engine Registry

**Registry Features:**
- Dynamic engine registration
- Engine metadata storage:
  - `id`: Engine identifier
  - `name`: Human-readable name
  - `description`: Engine description
  - `cliCommand`: CLI command name
  - `cliBinary`: Binary name for detection
  - `installCommand`: Installation instructions
  - `defaultModel`: Default model name
  - `defaultModelReasoningEffort`: Default reasoning level
- Default engine selection
- Engine lookup by ID
- All engines enumeration
- Engine-specific command variants

**Engine Factory:**
- Engine instance creation
- Provider-specific implementations
- Engine interface abstraction

---

## 5. Workspace Management

### 5.1 Workspace Structure

**Root Directory: `.radium/`**

**Radium Stages:**
- `radium/backlog/` - Generated plans (initial stage)
- `radium/development/` - Active development plans
- `radium/review/` - Plans in review stage
- `radium/testing/` - Plans in testing stage
- `radium/docs/` - Documentation

**Internal Workspace (`.radium/`):**
- `radium/.radium/agents/` - Generated agent prompts (from templates)
- `radium/.radium/artifacts/` - Generated artifacts (plan-scoped)
- `radium/.radium/memory/` - Plan-scoped memory (per plan)
- `radium/.radium/logs/` - Execution logs
- `radium/.radium/prompts/` - Cached prompts
- `radium/.radium/inputs/` - Input files
- `radium/.radium/template.json` - Active template tracking

**Plan Structure (per plan in backlog/development/review/testing):**
- `REQ-XXX-name/` - Plan folder
  - `plan.json` - Plan metadata
  - `specifications.md` - Original specification
  - `coordinator-prompt.md` - Coordinator agent prompt
  - `plan/` - Plan files directory
    - `plan_manifest.json` - Plan structure manifest
    - `01_Plan_Overview_and_Setup.md` - Overview and setup
    - `02_Iteration_I*.md` - Iteration files (one per iteration)
    - `03_Verification_and_Glossary.md` - Verification and glossary
  - `memory/` - Plan-scoped memory
    - `behavior.json` - Behavior control file
    - Agent output files
  - `artifacts/` - Generated artifacts (if any)
  - `prompts/` - Cached prompts (if any)

### 5.2 Plan Management

**Plan Discovery:**
- Discovery across all radium stages (backlog, development, review, testing, docs)
- Plan identification by REQ-XXX ID or folder name
- Plan metadata extraction from `plan.json`
- Plan structure detection (self-contained vs legacy)
- Plan validation (checks for plan files)

**Plan Listing:**
- List all plans with status and progress
- Sort by updated date or ID
- Progress percentage calculation
- Status display (not started, in progress, completed, etc.)
- Plan metadata display:
  - Requirement ID
  - Project name
  - Folder name
  - Created date
  - Total iterations
  - Completed tasks
  - Total tasks

**Plan Details:**
- Plan structure display
- Iteration listing
- Task listing per iteration
- Progress tracking
- Status indicators

**Plan Progress Tracking:**
- Task completion tracking
- Iteration completion tracking
- Progress percentage calculation
- Status updates
- Completion detection

**Requirement ID Management:**
- Auto-incrementing requirement IDs (REQ-001, REQ-002, etc.)
- Requirement counter file: `radium/.radium/requirement-counter.json`
- ID format validation (REQ-XXX)
- Manual ID override support
- Duplicate detection

**Plan Folder Naming:**
- Format: `REQ-XXX-slug`
- Slug generation from spec filename or custom name
- Folder name validation
- Duplicate folder detection

### 5.3 Plan Generation

**Specification Processing:**
- Specification file reading
- Markdown validation
- Specification content storage
- Specification cleaning for AI processing

**AI-Powered Plan Generation:**
- Plan agent execution
- Iteration structure creation
- Task extraction and structuring
- Architecture artifact generation
- Verification criteria generation
- Glossary generation

**Plan File Generation:**
- `01_Plan_Overview_and_Setup.md`: Project overview, setup instructions, architecture summary
- `02_Iteration_I*.md`: Per-iteration files with goals, tasks, and deliverables
- `03_Verification_and_Glossary.md`: Verification criteria and terminology
- `plan_manifest.json`: Structured plan data (iterations, tasks, dependencies)
- `coordinator-prompt.md`: Coordinator agent prompt for plan execution

**Plan Structure Creation:**
- Directory structure creation
- File writing
- Metadata generation
- Manifest creation

**Interactive Plan Generation:**
- AI-powered question generation
- Tech stack detection
- User input collection
- Enhanced specification building

### 5.4 Plan Execution

**Execution Modes:**
- Full plan execution
- Iteration-by-iteration execution (`--iteration <id>`)
- Task-by-task execution (`--task <id>`)
- Resume from checkpoint (`--resume`)

**Execution Flow:**
- Plan loading and validation
- Iteration selection
- Task selection
- Coordinator prompt loading
- Task execution
- Progress tracking
- Status updates

**Task Execution:**
- Task parsing from plan files
- Context gathering
- Agent execution
- Output capture
- Result validation
- Progress updates

**Checkpoint Management:**
- Checkpoint creation
- Checkpoint detection
- Resume from checkpoint
- State restoration

**Error Handling:**
- Task failure handling
- Iteration failure handling
- Error logging
- Recovery strategies

---

## 6. Memory and Context System

### 6.1 Plan-Scoped Memory

**Memory Architecture:**
- Memory directory per plan: `radium/backlog/REQ-XXX/memory/`
- File-based memory adapter
- Memory store interface
- Agent output storage

**Memory Storage:**
- Agent output storage (last 2000 characters)
- Timestamp tracking
- Agent ID association
- Content appending
- Memory retrieval

**Memory Adapter:**
- File system-based storage
- Directory creation
- File writing
- Content reading

**Memory Store:**
- `append()`: Add agent output to memory
- `get()`: Retrieve memory content
- Agent-scoped memory
- Timestamp tracking

**Memory Integration:**
- Automatic memory detection from plan directory
- Plan directory detection from environment or cwd
- Memory storage only in plan contexts
- Best-effort memory persistence

### 6.2 Context Management

**Context Gathering:**
- Architecture context from plan files
- Plan context from plan manifest
- Codebase context from project files
- Previous agent output from memory

**Context Manager Agent:**
- Specialized agent for context preparation
- Context aggregation
- Context formatting
- Context injection into prompts

**File Input Injection:**
- Syntax: `agent[input:file1.md,file2.md]`
- Multiple file support
- File path resolution
- File content reading
- Content injection into prompt

**Tail Context:**
- Syntax: `agent[tail:50]`
- Last N lines from previous output
- Context from memory
- Output truncation

**Context Combination:**
- Multiple input files: `agent[input:file1.md;file2.md;file3.md]`
- Combined syntax: `agent[input:design.md,tail:100]`
- Context prioritization
- Context size management

---

## 7. Monitoring and Telemetry

### 7.1 Agent Monitoring

**Monitoring Database:**
- SQLite database for agent tracking
- Schema: `agents` and `telemetry` tables
- Agent lifecycle tracking
- Parent-child relationship tracking

**Agent Registry:**
- Agent record creation on start
- Agent record updates on completion/failure
- Agent status tracking (running, completed, failed)
- Process ID tracking
- Start/end time tracking
- Duration calculation

**Parent-Child Relationships:**
- Parent agent ID tracking
- Child agent spawning
- Relationship hierarchy
- Cascade deletion

**Log File Management:**
- Log file path per agent
- Log file creation
- Log file writing
- Log file reading
- Log file cleanup

**Agent Queries:**
- List all agents
- Get agent by ID
- Get agents by status
- Get agents by parent
- Get agent logs

**Graceful Cleanup:**
- Process termination handlers
- Agent status updates on exit
- Log file finalization
- Database connection cleanup

### 7.2 Telemetry

**Telemetry Collection:**
- Token counting (input, output, cached)
- Cost calculation
- Cache statistics (creation, read tokens)
- Real-time telemetry updates
- Telemetry parsing from engine output

**Telemetry Storage:**
- Database storage per agent
- Telemetry record association with agent
- Telemetry aggregation
- Cost tracking

**Telemetry Parsing:**
- Engine-specific telemetry parsers
- Output parsing for telemetry markers
- Token extraction
- Cost calculation
- Cache statistics extraction

**Telemetry Display:**
- Real-time telemetry updates in UI
- Telemetry bar component
- Cost display
- Token usage display
- Cache hit rate display

### 7.3 Logging

**Log File System:**
- Agent-specific log files
- Log file path tracking in database
- Log file directory: `radium/.radium/logs/`
- Log file naming: `agent-{id}.log`

**Log Formatting:**
- Color marker transformation for log files
- Status text for log readability
- Timestamp inclusion
- Agent ID inclusion

**Dual-Stream Logging:**
- UI stream: Color-formatted output
- File stream: Plain text with status markers
- Synchronized writing
- Error stream handling

**Error Logging:**
- Error message logging
- Stack trace logging
- Error context logging
- Error file association

---

## 8. TUI/UI System

### 8.1 TUI Framework

**Framework:**
- React-based TUI using Ink
- Component-based architecture
- State management with WorkflowUIState
- Real-time updates

**Workflow UI Manager:**
- Central UI coordination
- Agent status management
- Output streaming
- Telemetry updates
- Navigation control

**State Management:**
- WorkflowUIState class
- Agent state tracking
- Sub-agent state tracking
- Output buffer management
- Telemetry state
- Checkpoint state

**Real-Time Updates:**
- Agent status updates
- Output streaming
- Telemetry updates
- Progress updates
- Status changes

### 8.2 UI Components

**AgentTimeline:**
- Agent execution timeline
- Status indicators
- Progress visualization

**BrandingHeader:**
- Radium branding
- Version display
- Status information

**CheckpointModal:**
- Checkpoint dialog
- Checkpoint reason display
- User interaction

**HistoryView:**
- Execution history
- Past agent runs
- Historical data

**LogViewer:**
- Agent log display
- Log file reading
- Log navigation

**LoopIndicator:**
- Loop status display
- Iteration count
- Loop information

**MainAgentNode:**
- Main agent display
- Status indicator
- Output preview

**OutputWindow:**
- Agent output display
- Streaming output
- Scrollable content

**ShimmerText:**
- Animated text
- Loading indicators
- Visual feedback

**StatusFooter:**
- Overall status
- Progress summary
- Key indicators

**SubAgentList:**
- Sub-agent listing
- Sub-agent status
- Hierarchy display

**SubAgentSummary:**
- Sub-agent summary
- Quick status
- Aggregated information

**TelemetryBar:**
- Telemetry display
- Cost information
- Token usage
- Cache statistics

**TriggeredAgentList:**
- Triggered agents display
- Trigger relationships
- Trigger status

**UIElementNode:**
- UI separator elements
- Visual dividers
- Section labels

**WorkflowDashboard:**
- Main dashboard view
- Overall workflow status
- Agent overview

### 8.3 UI Features

**Terminal Interaction:**
- Terminal clearing
- Color support
- Cursor management
- Screen management

**Visual Elements:**
- Spinner animations
- Progress bars
- Status indicators
- Color coding

**Interactive Elements:**
- Interactive menus
- Selection prompts
- User input
- Keyboard navigation

**Output Management:**
- Output buffering
- Output scrolling
- Output truncation
- Output filtering

---

## 9. Configuration System

### 9.1 Agent Configuration (config/main.agents.js)

**Configuration Format:**
- JavaScript module export
- Array of agent definitions
- Agent definition structure:
  - `id`: Unique identifier
  - `name`: Human-readable name
  - `description`: Agent description
  - `promptPath`: Path to prompt file (absolute)
  - `mirrorPath`: Path to mirrored prompt (relative, for RAD-agents)
  - `engine`: Default engine (optional)
  - `model`: Default model (optional)
  - `modelReasoningEffort`: Default reasoning level (optional)

**Agent Discovery:**
- Multiple root directory search
- Prompt file resolution
- Mirror path resolution
- Agent filtering
- Agent JSON mirroring

### 9.2 Module Configuration (config/modules.js)

**Configuration Format:**
- JavaScript module export
- Array of module definitions
- Module definition structure:
  - `id`: Unique identifier
  - `name`: Human-readable name
  - `description`: Module description
  - `promptPath`: Path to prompt file
  - `behavior`: Behavior configuration
    - `type`: "loop" | "trigger" | "checkpoint"
    - `action`: Behavior action
    - Additional behavior-specific config

**Behavior Types:**
- `loop`: Step back behavior
- `trigger`: Trigger other agents
- `checkpoint`: Save and resume

### 9.3 Placeholder System (config/placeholders.js)

**Placeholder Definition:**
- Dynamic content injection
- Placeholder resolution
- Template variable substitution

**Placeholder Usage:**
- `{{placeholder_name}}` syntax in prompts
- Placeholder replacement during prompt processing
- Context-aware placeholders
- File content placeholders

### 9.4 Workflow Templates

**Template Location:**
- `templates/workflows/` directory
- JavaScript workflow files (`.workflow.js`)
- Template validation

**Template Structure:**
```javascript
export default {
  name: "Template Name",
  steps: [
    resolveStep("agent-id", { /* parameters */ }),
    resolveModule("module-id", { /* parameters */ }),
    resolveUI("Label"),
  ],
  subAgentIds: ["sub-agent-1", "sub-agent-2"],
};
```

**Step Resolution Functions:**
- `resolveStep(agentId, parameters)`: Load main agent
- `resolveModule(moduleId, parameters)`: Load module with behavior
- `resolveUI(label)`: Create UI separator

**Template Parameters:**
- `engine`: Engine override
- `model`: Model override
- `modelReasoningEffort`: Reasoning level override
- `executeOnce`: Execute only once flag
- `notCompletedFallback`: Fallback agent ID
- `loopSteps`: Steps to loop back
- `loopMaxIterations`: Maximum iterations
- `loopSkip`: Steps to skip in loop

**Template Features:**
- Template loading and validation
- Active template tracking
- Agent folder regeneration
- Template change detection

---

## 10. Project Introspection

### 10.1 Tech Stack Detection

**Detection Capabilities:**
- Frontend technology detection
- Backend technology detection
- Database detection
- Automatic detection from project files

**Detection Methods:**
- Package.json analysis
- Configuration file detection
- Directory structure analysis
- File extension analysis

**Detected Technologies:**
- Frontend: React, Vue, Angular, etc.
- Backend: Node.js, Python, Java, etc.
- Database: PostgreSQL, MongoDB, MySQL, etc.

### 10.2 Question Generation

**AI-Powered Question Generation:**
- Context-aware question generation
- Question type detection
- Required vs optional questions
- Multiple-choice question generation
- Free-text question generation

**Question Types:**
- Multiple-choice: Predefined options
- Free-text: Open-ended answers
- Required: Must be answered
- Optional: Can be skipped

**Question Context:**
- User prompt analysis
- Detected tech stack consideration
- Existing answers consideration
- Project type consideration

**Question Flow:**
- Sequential question asking
- Answer validation
- Answer storage
- Enhanced specification building

---

## 11. Prompt System

### 11.1 Prompt Templates

**Template Organization:**
- Markdown-based prompt templates
- Organized by agent type/category
- Template directory structure:
  - `prompts/agents/legacy-system/` - Core Legacy System agents
  - `prompts/agents/rad-agents/` - RAD-agents library
  - `prompts/agents/dev-radium/` - Development agents
  - `prompts/agents/test-workflows/` - Test agents

**Template Format:**
- Markdown files (`.md`)
- Structured prompt content
- Placeholder support
- Section organization

**Template Features:**
- Template loading
- Template caching
- Template processing
- Placeholder resolution

### 11.2 Prompt Processing

**Processing Pipeline:**
- Prompt string loading
- Placeholder replacement
- Context injection
- File content injection
- Final prompt assembly

**Placeholder Replacement:**
- `{{placeholder_name}}` syntax
- Placeholder value lookup
- Context-aware replacement
- Default value fallback

**Context Injection:**
- Architecture context
- Plan context
- Codebase context
- Memory context
- User input context

**File Content Injection:**
- File reading
- Content insertion
- Multiple file support
- Content formatting

---

## 12. Validation and Error Handling

### 12.1 Validation

**Specification Validation:**
- File existence check
- Markdown file validation
- Content validation
- Structure validation

**Plan Structure Validation:**
- Plan manifest validation
- Iteration structure validation
- Task structure validation
- Dependency validation

**Agent Configuration Validation:**
- Agent ID uniqueness
- Prompt path validation
- Engine validation
- Model validation

**Workflow Template Validation:**
- Template structure validation
- Step validation
- Agent reference validation
- Module reference validation

### 12.2 Error Handling

**Error Types:**
- File not found errors
- Validation errors
- Execution errors
- Authentication errors
- Engine errors

**Error Recovery:**
- Graceful error recovery
- Fallback agent execution
- Error logging
- User-friendly error messages

**Error Logging:**
- Error message logging
- Stack trace logging
- Error context logging
- Error file association

**User Experience:**
- Clear error messages
- Actionable error guidance
- Error recovery suggestions
- Error prevention

---

## 13. Git Integration

### 13.1 Git Operations

**Git Commit Agent:**
- Automated git commit creation
- Commit message generation
- Branch management
- .gitignore management

**Commit Message Generation:**
- AI-powered commit message creation
- Context-aware messages
- Conventional commit format
- Descriptive messages

**Branch Creation:**
- Feature branch creation
- Branch naming conventions
- Branch switching

**.gitignore Management:**
- Automatic .gitignore updates
- Workspace directory exclusion
- Artifact exclusion
- Log file exclusion

---

## 14. Build and Distribution

### 14.1 Binary Building

**Platform-Specific Binaries:**
- Darwin ARM64 (Apple Silicon)
- Darwin x64 (Intel Mac)
- Linux x64
- Windows x64

**Binary Generation:**
- Build script execution
- Platform detection
- Binary compilation
- Binary packaging

**npm Package Distribution:**
- Package.json configuration
- Optional dependencies for binaries
- Platform-specific package selection
- Binary installation

### 14.2 Version Management

**Version Bumping:**
- Version increment script
- Semantic versioning
- Changelog generation
- Tag creation

**Release Publishing:**
- npm publishing
- Binary publishing
- Release validation
- Release notes

**Validation Scripts:**
- Pre-publish validation
- Binary validation
- Package validation
- Integration testing

---

## 15. Testing

### 15.1 Test Framework

**Test Types:**
- Unit tests
- Integration tests
- E2E tests
- UI tests (ink-testing-library)

**Test Coverage:**
- Coverage reporting
- Coverage thresholds
- Coverage analysis

**Test Execution:**
- Test runner (Bun test)
- Watch mode
- Coverage mode
- Test filtering

### 15.2 Test Organization

**Test Structure:**
- Unit tests: `tests/unit/`
- Integration tests: `tests/integration/`
- E2E tests: `tests/e2e/`
- UI tests: `tests/ui/`

**Test Utilities:**
- Test fixtures
- Mock implementations
- Test helpers
- Test utilities

---

## 16. Documentation

### 16.1 Documentation Generation

**Plan Documentation:**
- Plan overview generation
- Iteration documentation
- Task documentation
- Verification documentation

**Agent Documentation:**
- Agent description
- Agent capabilities
- Agent usage examples

**Workflow Documentation:**
- Workflow structure
- Step documentation
- Behavior documentation

---

## 17. Special Features

### 17.1 Coordinator Service

**Multi-Agent Coordination:**
- Script parsing
- Agent orchestration
- Parallel execution coordination
- Sequential execution coordination

**Script Syntax:**
- Single agent: `"agent-id 'prompt'"`
- Parallel: `"agent1 'task1' & agent2 'task2'"`
- Sequential: `"agent1 'task1' && agent2 'task2'"`
- Mixed: Combined parallel and sequential

**Execution Management:**
- Agent execution queue
- Execution order management
- Dependency resolution
- Result aggregation

### 17.2 RAD-Agents Integration

**RAD-Agents Library:**
- 70+ specialized agents
- Agent mirroring system
- Agent categorization:
  - Design agents
  - Engineering agents
  - Marketing agents
  - Product agents
  - Project management agents
  - Security agents
  - Testing agents
  - Support agents
  - Specialized agents
  - Spatial computing agents

**Agent Mirroring:**
- Mirror path resolution
- Prompt file mirroring
- Agent registration
- Agent discovery

**Agent Categories:**
- Organized by domain
- Specialized expertise
- Cross-functional agents
- Domain-specific agents

### 17.3 Non-Interactive Mode

**CI/CD Integration:**
- JSON output support
- Environment variable detection (`CI=1`)
- Non-interactive flag detection
- Scripting support

**JSON Output:**
- Structured JSON responses
- Machine-readable format
- Error JSON format
- Success JSON format

**Environment Detection:**
- CI environment detection
- TTY detection
- Non-interactive mode activation
- Default behavior changes

---

## Implementation Notes

### Feature Completeness
This backlog represents all features identified in the legacy system v0.58.0. When implementing Radium, each feature should be:
1. Analyzed for Rust implementation approach
2. Designed with Radium's architecture in mind
3. Implemented with feature parity
4. Tested against legacy system behavior
5. Documented in Radium's documentation

### Priority Considerations
While all features should eventually be implemented, consider prioritizing:
1. Core CLI commands (plan, craft, run, step)
2. Workflow execution system
3. Agent system and engine integration
4. Workspace management
5. Monitoring and telemetry
6. TUI/UI system
7. Advanced features (behaviors, triggers, etc.)

### Architecture Differences
Radium is built in Rust, so implementation approaches will differ:
- TypeScript → Rust conversion
- Node.js/Bun runtime → Native Rust binary
- React/Ink TUI → Ratatui or similar Rust TUI library
- SQLite (via Bun) → Native Rust SQLite crate
- File system operations → Rust std::fs or tokio::fs

### Testing Strategy
Ensure feature parity through:
- Behavioral testing against legacy system
- Integration testing
- E2E testing
- Performance comparison
- Compatibility testing

---

**End of Feature Backlog**

